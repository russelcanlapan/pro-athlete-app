<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Team Performance Statistics</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; }
        
        .member-card {
            transition: all 0.2s ease;
        }
        
        .member-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }

        .dropdown {
            transition: all 0.2s ease;
        }

        .performance-line {
            stroke-width: 3;
            fill: none;
            stroke-linecap: round;
            stroke-linejoin: round;
        }

        .performance-dot {
            transition: all 0.2s ease;
        }

        .performance-dot:hover {
            r: 6;
            stroke-width: 3;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-50 min-h-screen">
    <div class="min-h-screen">
        <!-- Main Content -->
        <div class="px-6 py-8 max-w-4xl mx-auto">
                         <!-- Header -->
             <div class="flex items-center space-x-4 mb-8">
                 <button onclick="goBack()" class="p-2 hover:bg-white/50 rounded-full transition-colors">
                     <svg class="w-6 h-6 text-gray-700" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                         <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                     </svg>
                 </button>
                 <div class="flex items-center space-x-2">
                     <h1 class="text-2xl font-bold text-gray-900" id="teamTitle">Team XXX's Performance</h1>
                     <button onclick="toggleInfo()" class="p-2 hover:bg-white/50 rounded-full transition-colors">
                         <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                             <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                         </svg>
                     </button>
                 </div>
             </div>

            <!-- Filter and Sort Controls -->
            <div class="flex space-x-4 mb-6">
                <!-- Position Filter -->
                <div class="relative flex-1">
                    <button onclick="togglePositionDropdown()" class="w-full bg-white rounded-xl px-4 py-3 text-left flex items-center justify-between shadow-sm border border-gray-200">
                        <span id="positionFilterText" class="font-medium text-gray-900">All</span>
                        <svg class="w-5 h-5 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                        </svg>
                    </button>
                    <div id="positionDropdown" class="hidden absolute top-full left-0 right-0 mt-1 bg-white rounded-xl shadow-lg border border-gray-200 z-50">
                        <div class="py-2">
                            <button onclick="selectPosition('all')" class="w-full text-left px-4 py-2 hover:bg-gray-50 flex items-center justify-between">
                                <span>All</span>
                                <svg class="w-4 h-4 text-blue-600 hidden" id="checkAll" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                                </svg>
                            </button>
                            <button onclick="selectPosition('guards')" class="w-full text-left px-4 py-2 hover:bg-gray-50 flex items-center justify-between">
                                <span>Guards</span>
                                <svg class="w-4 h-4 text-blue-600 hidden" id="checkGuards" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                                </svg>
                            </button>
                            <button onclick="selectPosition('forwards')" class="w-full text-left px-4 py-2 hover:bg-gray-50 flex items-center justify-between">
                                <span>Forwards</span>
                                <svg class="w-4 h-4 text-blue-600 hidden" id="checkForwards" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                                </svg>
                            </button>
                            <button onclick="selectPosition('centers')" class="w-full text-left px-4 py-2 hover:bg-gray-50 flex items-center justify-between">
                                <span>Centers</span>
                                <svg class="w-4 h-4 text-blue-600 hidden" id="checkCenters" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Sort Dropdown -->
                <div class="relative flex-1">
                    <button onclick="toggleSortDropdown()" class="w-full bg-white rounded-xl px-4 py-3 text-left flex items-center justify-between shadow-sm border border-gray-200">
                        <span id="sortFilterText" class="font-medium text-gray-900">Overall Performance</span>
                        <svg class="w-5 h-5 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                        </svg>
                    </button>
                    <div id="sortDropdown" class="hidden absolute top-full left-0 right-0 mt-1 bg-white rounded-xl shadow-lg border border-gray-200 z-50">
                        <div class="py-2">
                            <button onclick="selectSort('overall')" class="w-full text-left px-4 py-2 hover:bg-gray-50 flex items-center justify-between">
                                <span>Overall Performance</span>
                                <svg class="w-4 h-4 text-blue-600" id="sortOverall" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                                </svg>
                            </button>
                            <button onclick="selectSort('strength')" class="w-full text-left px-4 py-2 hover:bg-gray-50 flex items-center justify-between">
                                <span>Strength Performance</span>
                                <svg class="w-4 h-4 text-blue-600 hidden" id="sortStrength" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                                </svg>
                            </button>
                            <button onclick="selectSort('prehab')" class="w-full text-left px-4 py-2 hover:bg-gray-50 flex items-center justify-between">
                                <span>Prehab Performance</span>
                                <svg class="w-4 h-4 text-blue-600 hidden" id="sortPrehab" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                                </svg>
                            </button>
                            <button onclick="selectSort('mobility')" class="w-full text-left px-4 py-2 hover:bg-gray-50 flex items-center justify-between">
                                <span>Mobility Performance</span>
                                <svg class="w-4 h-4 text-blue-600 hidden" id="sortMobility" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Team Members List -->
            <div class="mb-8">
                <div id="membersList" class="space-y-4">
                    <!-- Members will be dynamically generated -->
                </div>
            </div>

                         <!-- Overall Performance Section -->
             <div class="mb-20">
                 <div class="flex items-center space-x-2 mb-6">
                     <h2 class="text-xl font-bold text-gray-900">Overall Performance</h2>
                     <button onclick="togglePerformanceInfo()" class="p-2 hover:bg-white/50 rounded-full transition-colors">
                         <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                             <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                         </svg>
                     </button>
                 </div>

                <!-- Timeframe Selector -->
                <div class="flex bg-white/70 backdrop-blur-sm rounded-xl p-1 mb-6 shadow-sm">
                    <button onclick="selectTimeframe('weekly')" id="weeklyBtn" class="flex-1 py-3 px-6 rounded-lg font-semibold text-sm bg-gradient-to-r from-blue-600 to-blue-700 text-white shadow-md">
                        Weekly
                    </button>
                    <button onclick="selectTimeframe('monthly')" id="monthlyBtn" class="flex-1 py-3 px-6 rounded-lg font-semibold text-sm text-gray-700 hover:bg-white/50 transition-colors">
                        Monthly
                    </button>
                    <button onclick="selectTimeframe('yearly')" id="yearlyBtn" class="flex-1 py-3 px-6 rounded-lg font-semibold text-sm text-gray-700 hover:bg-white/50 transition-colors">
                        Yearly
                    </button>
                </div>

                                 <!-- Show Last Week Checkbox -->
                 <div class="flex items-center mb-6">
                     <input type="checkbox" id="showLastWeek" onchange="toggleLastWeekData()" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500">
                     <label for="showLastWeek" class="ml-2 text-sm font-medium text-gray-700">Show Last week</label>
                 </div>

                <!-- Performance Graph -->
                <div class="bg-white rounded-2xl p-6 shadow-lg border border-gray-100">
                    <div class="w-full h-64">
                        <svg id="performanceGraph" class="w-full h-full" viewBox="0 0 400 200">
                            <!-- Grid lines -->
                            <defs>
                                <pattern id="grid" width="50" height="40" patternUnits="userSpaceOnUse">
                                    <path d="M 50 0 L 0 0 0 40" fill="none" stroke="#f3f4f6" stroke-width="1"/>
                                </pattern>
                            </defs>
                            <rect width="100%" height="100%" fill="url(#grid)" />
                            
                            <!-- Y-axis labels -->
                            <text x="10" y="20" class="text-xs fill-gray-500">100%</text>
                            <text x="10" y="60" class="text-xs fill-gray-500">75%</text>
                            <text x="10" y="100" class="text-xs fill-gray-500">50%</text>
                            <text x="10" y="140" class="text-xs fill-gray-500">25%</text>
                            <text x="10" y="180" class="text-xs fill-gray-500">0%</text>
                            
                            <!-- X-axis labels -->
                            <text x="70" y="195" class="text-xs fill-gray-500">Mon</text>
                            <text x="120" y="195" class="text-xs fill-gray-500">Tue</text>
                            <text x="170" y="195" class="text-xs fill-gray-500">Wed</text>
                            <text x="220" y="195" class="text-xs fill-gray-500">Thu</text>
                            <text x="270" y="195" class="text-xs fill-gray-500">Fri</text>
                            <text x="320" y="195" class="text-xs fill-gray-500">Sat</text>
                            <text x="370" y="195" class="text-xs fill-gray-500">Sun</text>
                            
                            <!-- Performance lines will be drawn here -->
                        </svg>
                    </div>
                    
                    <!-- Legend -->
                    <div class="flex justify-center space-x-6 mt-4">
                        <div class="flex items-center space-x-2">
                            <div class="w-3 h-3 bg-red-500 rounded-full"></div>
                            <span class="text-sm text-gray-700">Strength</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <div class="w-3 h-3 bg-blue-500 rounded-full"></div>
                            <span class="text-sm text-gray-700">Prehab</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <div class="w-3 h-3 bg-purple-500 rounded-full"></div>
                            <span class="text-sm text-gray-700">Mobility</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Bottom Navigation -->
        <div class="fixed bottom-0 left-0 right-0 bg-white/90 backdrop-blur-md border-t border-gray-200">
            <div class="flex justify-around py-3">
                <a href="home.html" class="flex flex-col items-center py-2 px-4 text-gray-500 hover:text-gray-700 transition-colors">
                    <svg class="w-6 h-6 mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
                    </svg>
                    <span class="text-xs font-medium">Home</span>
                </a>
                <a href="tracking.html" class="flex flex-col items-center py-2 px-4 text-blue-600">
                    <svg class="w-6 h-6 mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                    </svg>
                    <span class="text-xs font-medium">Tracking</span>
                </a>
                <a href="profile.html" class="flex flex-col items-center py-2 px-4 text-gray-500 hover:text-gray-700 transition-colors">
                    <svg class="w-6 h-6 mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                    </svg>
                    <span class="text-xs font-medium">Profile</span>
                </a>
            </div>
        </div>
    </div>

    <script>
        let currentPosition = 'all';
        let currentSort = 'overall';
        let currentTimeframe = 'weekly';
        let teamMembers = [];

        // Sample team members data
        const sampleMembers = [
            {
                id: 1,
                name: 'Anna Wang',
                position: 'Center',
                avatar: 'AW',
                strength: 93,
                prehab: 83,
                mobility: 61,
                overall: 73
            },
            {
                id: 2,
                name: 'Scarlett Zhang',
                position: 'Guard',
                avatar: 'SZ',
                strength: 93,
                prehab: 83,
                mobility: 61,
                overall: 73
            },
            {
                id: 3,
                name: 'Tia Pavel',
                position: 'Guard',
                avatar: 'TP',
                strength: 62,
                prehab: 92,
                mobility: 77,
                overall: 81
            },
            {
                id: 4,
                name: 'Anna Wang',
                position: 'Forward',
                avatar: 'AW',
                strength: 85,
                prehab: 78,
                mobility: 69,
                overall: 77
            }
        ];

                 // Performance data for different timeframes
         const performanceData = {
             weekly: {
                 current: {
                     strength: [28, 8, 35, 45, 40, 25, 15],
                     prehab: [10, 25, 35, 55, 50, 45, 55],
                     mobility: [65, 70, 75, 78, 72, 68, 65]
                 },
                 last: {
                     strength: [25, 30, 35, 40, 45, 40, 25],
                     prehab: [25, 35, 45, 55, 60, 65, 70],
                     mobility: [75, 80, 85, 95, 90, 85, 75]
                 }
             },
             monthly: {
                 current: {
                     strength: [70, 75, 80, 85],
                     prehab: [75, 80, 85, 90],
                     mobility: [65, 70, 75, 80]
                 },
                 last: {
                     strength: [65, 70, 75, 80],
                     prehab: [70, 75, 80, 85],
                     mobility: [60, 65, 70, 75]
                 }
             },
             yearly: {
                 current: {
                     strength: [60, 65, 70, 75, 80, 85, 90, 85, 80, 75, 70, 65],
                     prehab: [65, 70, 75, 80, 85, 90, 95, 90, 85, 80, 75, 70],
                     mobility: [55, 60, 65, 70, 75, 80, 85, 80, 75, 70, 65, 60]
                 },
                 last: {
                     strength: [55, 60, 65, 70, 75, 80, 85, 80, 75, 70, 65, 60],
                     prehab: [60, 65, 70, 75, 80, 85, 90, 85, 80, 75, 70, 65],
                     mobility: [50, 55, 60, 65, 70, 75, 80, 75, 70, 65, 60, 55]
                 }
             }
         };

        function goBack() {
            window.history.back();
        }

        function toggleInfo() {
            alert('Performance statistics show detailed metrics for each team member including strength, prehab, and mobility performance.');
        }

        function togglePositionDropdown() {
            const dropdown = document.getElementById('positionDropdown');
            dropdown.classList.toggle('hidden');
            document.getElementById('sortDropdown').classList.add('hidden');
        }

        function toggleSortDropdown() {
            const dropdown = document.getElementById('sortDropdown');
            dropdown.classList.toggle('hidden');
            document.getElementById('positionDropdown').classList.add('hidden');
        }

        function selectPosition(position) {
            currentPosition = position;
            document.getElementById('positionFilterText').textContent = 
                position === 'all' ? 'All' : 
                position === 'guards' ? 'Guards' : 
                position === 'forwards' ? 'Forwards' : 'Centers';
            
            // Update checkmarks
            document.querySelectorAll('[id^="check"]').forEach(el => el.classList.add('hidden'));
            document.getElementById(`check${position.charAt(0).toUpperCase() + position.slice(1)}`).classList.remove('hidden');
            
            document.getElementById('positionDropdown').classList.add('hidden');
            renderMembers();
        }

        function selectSort(sort) {
            currentSort = sort;
            document.getElementById('sortFilterText').textContent = 
                sort === 'overall' ? 'Overall Performance' : 
                sort === 'strength' ? 'Strength Performance' : 
                sort === 'prehab' ? 'Prehab Performance' : 'Mobility Performance';
            
            // Update checkmarks
            document.querySelectorAll('[id^="sort"]').forEach(el => el.classList.add('hidden'));
            document.getElementById(`sort${sort.charAt(0).toUpperCase() + sort.slice(1)}`).classList.remove('hidden');
            
            document.getElementById('sortDropdown').classList.add('hidden');
            renderMembers();
        }

                 function selectTimeframe(timeframe) {
             currentTimeframe = timeframe;
             
             // Update button styles
             document.getElementById('weeklyBtn').className = 'flex-1 py-3 px-6 rounded-lg font-semibold text-sm ' + 
                 (timeframe === 'weekly' ? 'bg-gradient-to-r from-blue-600 to-blue-700 text-white shadow-md' : 'text-gray-700 hover:bg-white/50 transition-colors');
             document.getElementById('monthlyBtn').className = 'flex-1 py-3 px-6 rounded-lg font-semibold text-sm ' + 
                 (timeframe === 'monthly' ? 'bg-gradient-to-r from-blue-600 to-blue-700 text-white shadow-md' : 'text-gray-700 hover:bg-white/50 transition-colors');
             document.getElementById('yearlyBtn').className = 'flex-1 py-3 px-6 rounded-lg font-semibold text-sm ' + 
                 (timeframe === 'yearly' ? 'bg-gradient-to-r from-blue-600 to-blue-700 text-white shadow-md' : 'text-gray-700 hover:bg-white/50 transition-colors');
             
             renderPerformanceGraph();
         }

         function toggleLastWeekData() {
             renderPerformanceGraph();
         }

                 function togglePerformanceInfo() {
             alert('This graph shows the team\'s overall performance trends over time. You can switch between weekly, monthly, and yearly views.');
         }

         function toggleMemberDetails(memberId) {
             const detailsSection = document.getElementById(`details-${memberId}`);
             const arrow = document.getElementById(`arrow-${memberId}`);
             
             if (detailsSection.classList.contains('hidden')) {
                 // Expand
                 detailsSection.classList.remove('hidden');
                 arrow.classList.add('rotate-180');
                 
                 // Render member performance graph
                 renderMemberPerformanceGraph(memberId);
             } else {
                 // Collapse
                 detailsSection.classList.add('hidden');
                 arrow.classList.remove('rotate-180');
             }
         }

         function renderMemberPerformanceGraph(memberId) {
             const svg = document.getElementById(`member-graph-${memberId}`);
             
             // Sample weekly data for the member
             const memberData = {
                 strength: [65, 72, 68, 75, 80, 78, 82],
                 prehab: [70, 75, 72, 78, 82, 85, 88],
                 mobility: [60, 65, 76, 72, 68, 75, 78]
             };
             
             const width = 300;
             const height = 100;
             const padding = 30;
             const chartWidth = width - padding * 2;
             const chartHeight = height - padding * 2;
             
             const days = memberData.strength.length;
             const xStep = chartWidth / (days - 1);
             
             // Draw performance lines
             const categories = [
                 { key: 'strength', color: '#ef4444' },
                 { key: 'prehab', color: '#3b82f6' },
                 { key: 'mobility', color: '#8b5cf6' }
             ];
             
             categories.forEach(category => {
                 const points = memberData[category.key].map((value, index) => {
                     const x = padding + index * xStep;
                     const y = padding + chartHeight - (value / 100) * chartHeight;
                     return `${x},${y}`;
                 }).join(' ');
                 
                 // Create line
                 const line = document.createElementNS('http://www.w3.org/2000/svg', 'polyline');
                 line.setAttribute('points', points);
                 line.setAttribute('class', 'performance-line');
                 line.setAttribute('stroke', category.color);
                 line.setAttribute('fill', 'none');
                 line.setAttribute('stroke-width', '2');
                 svg.appendChild(line);
                 
                 // Create dots
                 memberData[category.key].forEach((value, index) => {
                     const x = padding + index * xStep;
                     const y = padding + chartHeight - (value / 100) * chartHeight;
                     
                     const dot = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
                     dot.setAttribute('cx', x);
                     dot.setAttribute('cy', y);
                     dot.setAttribute('r', '2');
                     dot.setAttribute('class', 'performance-dot');
                     dot.setAttribute('fill', category.color);
                     dot.setAttribute('stroke', 'white');
                     dot.setAttribute('stroke-width', '1');
                     svg.appendChild(dot);
                 });
             });
         }

        function renderMembers() {
            const membersList = document.getElementById('membersList');
            membersList.innerHTML = '';

            // Filter members by position
            let filteredMembers = sampleMembers;
            if (currentPosition !== 'all') {
                filteredMembers = sampleMembers.filter(member => 
                    member.position.toLowerCase() === currentPosition.slice(0, -1) // Remove 's' from 'guards', 'forwards', 'centers'
                );
            }

            // Sort members by selected criteria
            filteredMembers.sort((a, b) => {
                const aValue = a[currentSort === 'overall' ? 'overall' : currentSort];
                const bValue = b[currentSort === 'overall' ? 'overall' : currentSort];
                return bValue - aValue; // Sort in descending order
            });

            filteredMembers.forEach(member => {
                const memberCard = createMemberCard(member);
                membersList.appendChild(memberCard);
            });
        }

                 function createMemberCard(member) {
             const card = document.createElement('div');
             card.className = 'member-card bg-white/80 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-gray-100';
             
             card.innerHTML = `
                 <div class="flex items-center justify-between">
                     <div class="flex items-center space-x-4">
                         <div class="w-12 h-12 bg-blue-600 rounded-full flex items-center justify-center">
                             <span class="text-white font-semibold text-sm">${member.avatar}</span>
                         </div>
                         <div>
                             <h3 class="font-semibold text-gray-900">${member.name}</h3>
                             <p class="text-sm text-gray-600">(${member.position})</p>
                         </div>
                     </div>
                     <div class="flex items-center space-x-4">
                         <div class="text-center">
                             <div class="flex items-center space-x-1 mb-1">
                                 <svg class="w-4 h-4 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                     <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path>
                                     <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                 </svg>
                             </div>
                             <span class="text-sm font-semibold text-gray-900">${member.strength}%</span>
                         </div>
                         <div class="text-center">
                             <div class="flex items-center space-x-1 mb-1">
                                 <svg class="w-4 h-4 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                     <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                                 </svg>
                             </div>
                             <span class="text-sm font-semibold text-gray-900">${member.prehab}%</span>
                         </div>
                         <div class="text-center">
                             <div class="flex items-center space-x-1 mb-1">
                                 <svg class="w-4 h-4 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                     <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                                 </svg>
                             </div>
                             <span class="text-sm font-semibold text-gray-900">${member.mobility}%</span>
                         </div>
                         <div class="text-center">
                             <div class="flex items-center space-x-1 mb-1">
                                 <svg class="w-4 h-4 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                     <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path>
                                 </svg>
                             </div>
                             <span class="text-sm font-semibold text-gray-900">${member.overall}%</span>
                         </div>
                     </div>
                     <button onclick="toggleMemberDetails(${member.id})" class="p-2 hover:bg-gray-100 rounded-full transition-colors">
                         <svg id="arrow-${member.id}" class="w-5 h-5 text-gray-500 transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                             <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                         </svg>
                     </button>
                 </div>
                 
                 <!-- Expanded Details Section -->
                 <div id="details-${member.id}" class="hidden mt-6 pt-6 border-t border-gray-200">
                     <!-- Strength Weekly Performance -->
                     <div class="mb-6">
                         <h4 class="font-semibold text-gray-900 mb-3">Strength Weekly Performance: ${member.strength}%</h4>
                         <ul class="space-y-2 text-sm text-gray-700">
                             <li class="flex items-start">
                                 <span class="w-2 h-2 bg-gray-400 rounded-full mt-2 mr-3 flex-shrink-0"></span>
                                 <span>Time completion (94%): Completed the programs in the recommended time frame.</span>
                             </li>
                             <li class="flex items-start">
                                 <span class="w-2 h-2 bg-gray-400 rounded-full mt-2 mr-3 flex-shrink-0"></span>
                                 <span>Exercise completion (98%): Completed all of the recommended exercises.</span>
                             </li>
                             <li class="flex items-start">
                                 <span class="w-2 h-2 bg-gray-400 rounded-full mt-2 mr-3 flex-shrink-0"></span>
                                 <span>Training Frequency (72%): Trained at the recommended frequency.</span>
                             </li>
                             <li class="flex items-start">
                                 <span class="w-2 h-2 bg-gray-400 rounded-full mt-2 mr-3 flex-shrink-0"></span>
                                 <span>Weight progression (94%): Progressed their weights.</span>
                             </li>
                         </ul>
                     </div>
                     
                     <!-- Prehab Weekly Performance -->
                     <div class="mb-6">
                         <h4 class="font-semibold text-gray-900 mb-3">Prehab Weekly Performance: ${member.prehab}%</h4>
                         <ul class="space-y-2 text-sm text-gray-700">
                             <li class="flex items-start">
                                 <span class="w-2 h-2 bg-gray-400 rounded-full mt-2 mr-3 flex-shrink-0"></span>
                                 <span>Time completion (92%): Completed the programs in the recommended time frame.</span>
                             </li>
                             <li class="flex items-start">
                                 <span class="w-2 h-2 bg-gray-400 rounded-full mt-2 mr-3 flex-shrink-0"></span>
                                 <span>Exercise completion (98%): Completed all of the recommended exercises.</span>
                             </li>
                             <li class="flex items-start">
                                 <span class="w-2 h-2 bg-gray-400 rounded-full mt-2 mr-3 flex-shrink-0"></span>
                                 <span>Training Frequency (72%): Trained at the recommended frequency.</span>
                             </li>
                         </ul>
                     </div>
                     
                     <!-- Mobility Weekly Performance -->
                     <div class="mb-6">
                         <h4 class="font-semibold text-gray-900 mb-3">Mobility Weekly Performance: ${member.mobility}%</h4>
                         <ul class="space-y-2 text-sm text-gray-700">
                             <li class="flex items-start">
                                 <span class="w-2 h-2 bg-gray-400 rounded-full mt-2 mr-3 flex-shrink-0"></span>
                                 <span>Time completion (48%): Completed the programs in the recommended time frame.</span>
                             </li>
                             <li class="flex items-start">
                                 <span class="w-2 h-2 bg-gray-400 rounded-full mt-2 mr-3 flex-shrink-0"></span>
                                 <span>Exercise completion (82%): Completed all of the recommended exercises.</span>
                             </li>
                             <li class="flex items-start">
                                 <span class="w-2 h-2 bg-gray-400 rounded-full mt-2 mr-3 flex-shrink-0"></span>
                                 <span>Training Frequency (72%): Trained at the recommended frequency.</span>
                             </li>
                         </ul>
                     </div>
                     
                     <!-- Overall Weekly Performance -->
                     <div class="mb-6">
                         <h4 class="font-semibold text-gray-900 mb-3">Overall Weekly Performance: ${member.overall}%</h4>
                         <div class="bg-gray-50 rounded-lg p-4">
                             <div class="w-full h-32">
                                 <svg id="member-graph-${member.id}" class="w-full h-full" viewBox="0 0 300 100">
                                     <!-- Grid lines -->
                                     <defs>
                                         <pattern id="member-grid-${member.id}" width="50" height="20" patternUnits="userSpaceOnUse">
                                             <path d="M 50 0 L 0 0 0 20" fill="none" stroke="#e5e7eb" stroke-width="0.5"/>
                                         </pattern>
                                     </defs>
                                     <rect width="100%" height="100%" fill="url(#member-grid-${member.id})" />
                                     
                                     <!-- Y-axis labels -->
                                     <text x="5" y="15" class="text-xs fill-gray-500">100%</text>
                                     <text x="5" y="35" class="text-xs fill-gray-500">75%</text>
                                     <text x="5" y="55" class="text-xs fill-gray-500">50%</text>
                                     <text x="5" y="75" class="text-xs fill-gray-500">25%</text>
                                     <text x="5" y="95" class="text-xs fill-gray-500">0%</text>
                                     
                                     <!-- X-axis labels -->
                                     <text x="50" y="98" class="text-xs fill-gray-500">Mon</text>
                                     <text x="100" y="98" class="text-xs fill-gray-500">Tue</text>
                                     <text x="150" y="98" class="text-xs fill-gray-500">Wed</text>
                                     <text x="200" y="98" class="text-xs fill-gray-500">Thu</text>
                                     <text x="250" y="98" class="text-xs fill-gray-500">Fri</text>
                                     <text x="300" y="98" class="text-xs fill-gray-500">Sat</text>
                                     <text x="350" y="98" class="text-xs fill-gray-500">Sun</text>
                                 </svg>
                             </div>
                             
                             <!-- Legend -->
                             <div class="flex justify-center space-x-4 mt-2">
                                 <div class="flex items-center space-x-1">
                                     <div class="w-2 h-2 bg-red-500 rounded-full"></div>
                                     <span class="text-xs text-gray-600">Strength</span>
                                 </div>
                                 <div class="flex items-center space-x-1">
                                     <div class="w-2 h-2 bg-blue-500 rounded-full"></div>
                                     <span class="text-xs text-gray-600">Prehab</span>
                                 </div>
                                 <div class="flex items-center space-x-1">
                                     <div class="w-2 h-2 bg-purple-500 rounded-full"></div>
                                     <span class="text-xs text-gray-600">Mobility</span>
                                 </div>
                             </div>
                         </div>
                     </div>
                 </div>
             `;
             
             return card;
         }

                 function renderPerformanceGraph() {
             const svg = document.getElementById('performanceGraph');
             const data = performanceData[currentTimeframe];
             const showLastWeek = document.getElementById('showLastWeek').checked;
             
             // Clear existing lines
             svg.querySelectorAll('.performance-line, .performance-dot').forEach(el => el.remove());
             
             const width = 400;
             const height = 200;
             const padding = 50;
             const chartWidth = width - padding * 2;
             const chartHeight = height - padding * 2;
             
             const days = data.current.strength.length;
             const xStep = chartWidth / (days - 1);
             
             // Draw current week performance lines (solid)
             const categories = [
                 { key: 'strength', color: '#ef4444' },
                 { key: 'prehab', color: '#3b82f6' },
                 { key: 'mobility', color: '#8b5cf6' }
             ];
             
             categories.forEach(category => {
                 const points = data.current[category.key].map((value, index) => {
                     const x = padding + index * xStep;
                     const y = padding + chartHeight - (value / 100) * chartHeight;
                     return `${x},${y}`;
                 }).join(' ');
                 
                 // Create solid line for current week
                 const line = document.createElementNS('http://www.w3.org/2000/svg', 'polyline');
                 line.setAttribute('points', points);
                 line.setAttribute('class', 'performance-line');
                 line.setAttribute('stroke', category.color);
                 line.setAttribute('fill', 'none');
                 line.setAttribute('stroke-width', '3');
                 svg.appendChild(line);
                 
                 // Create dots for current week
                 data.current[category.key].forEach((value, index) => {
                     const x = padding + index * xStep;
                     const y = padding + chartHeight - (value / 100) * chartHeight;
                     
                     const dot = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
                     dot.setAttribute('cx', x);
                     dot.setAttribute('cy', y);
                     dot.setAttribute('r', '4');
                     dot.setAttribute('class', 'performance-dot');
                     dot.setAttribute('fill', category.color);
                     dot.setAttribute('stroke', 'white');
                     dot.setAttribute('stroke-width', '2');
                     svg.appendChild(dot);
                 });
             });
             
             // Draw last week performance lines (dashed) if checkbox is checked
             if (showLastWeek && data.last) {
                 categories.forEach(category => {
                     const points = data.last[category.key].map((value, index) => {
                         const x = padding + index * xStep;
                         const y = padding + chartHeight - (value / 100) * chartHeight;
                         return `${x},${y}`;
                     }).join(' ');
                     
                     // Create dashed line for last week
                     const line = document.createElementNS('http://www.w3.org/2000/svg', 'polyline');
                     line.setAttribute('points', points);
                     line.setAttribute('class', 'performance-line');
                     line.setAttribute('stroke', category.color);
                     line.setAttribute('fill', 'none');
                     line.setAttribute('stroke-width', '2');
                     line.setAttribute('stroke-dasharray', '5,5');
                     line.setAttribute('opacity', '0.7');
                     svg.appendChild(line);
                     
                     // Create smaller dots for last week
                     data.last[category.key].forEach((value, index) => {
                         const x = padding + index * xStep;
                         const y = padding + chartHeight - (value / 100) * chartHeight;
                         
                         const dot = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
                         dot.setAttribute('cx', x);
                         dot.setAttribute('cy', y);
                         dot.setAttribute('r', '2');
                         dot.setAttribute('class', 'performance-dot');
                         dot.setAttribute('fill', category.color);
                         dot.setAttribute('stroke', 'white');
                         dot.setAttribute('stroke-width', '1');
                         dot.setAttribute('opacity', '0.7');
                         svg.appendChild(dot);
                     });
                 });
             }
         }

        // Close dropdowns when clicking outside
        document.addEventListener('click', function(event) {
            if (!event.target.closest('.relative')) {
                document.getElementById('positionDropdown').classList.add('hidden');
                document.getElementById('sortDropdown').classList.add('hidden');
            }
        });

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            // Get team name from URL parameter
            const urlParams = new URLSearchParams(window.location.search);
            const teamParam = urlParams.get('team');
            if (teamParam) {
                document.getElementById('teamTitle').textContent = `${teamParam}'s Performance`;
            }
            
            renderMembers();
            renderPerformanceGraph();
        });
    </script>
</body>
</html>
