<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teams</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        
        :root {
            --apple-gray-50: #fafafa;
            --apple-gray-100: #f5f5f5;
            --apple-gray-200: #e5e5e5;
            --apple-blue-500: #005F83;
            --apple-blue-400: #007BA3;
            --apple-shadow: 0 3px 15px rgba(0, 0, 0, 0.06);
            --apple-shadow-hover: 0 8px 25px rgba(0, 0, 0, 0.12);
            --apple-transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        
        body { 
            font-family: 'Inter', sans-serif; 
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
        }
        
        .apple-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            box-shadow: var(--apple-shadow);
            transition: var(--apple-transition);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        .team-card {
            transition: var(--apple-transition);
        }
        
        .team-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--apple-shadow-hover);
        }
        
        .apple-btn {
            border-radius: 9999px;
            transition: var(--apple-transition);
            font-weight: 500;
            border: none;
        }
        
        .apple-nav {
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        .apple-nav-item {
            border-radius: 14px;
            transition: var(--apple-transition);
        }
        
        .apple-nav-item:hover {
            background: rgba(0, 122, 255, 0.08);
        }
    </style>
</head>
<body class="min-h-screen">
    <div class="min-h-screen" style="padding: 24px 24px 120px 24px;">
        <!-- Main Content -->
        <div class="px-8 py-12 max-w-4xl mx-auto">
            <!-- Header -->
            <div class="apple-card p-10 mb-12">
                <h1 class="text-4xl font-bold text-gray-900">Teams</h1>
                <p class="text-gray-600 text-lg mt-3">Manage and monitor your team's progress</p>
            </div>

            <!-- Team Cards -->
            <div id="teamsContainer" class="space-y-4 mb-8">
                <!-- Teams will be dynamically loaded here -->
            </div>

            <!-- Add Team Section -->
            <div class="apple-card team-card border-2 border-dashed border-gray-200 p-12 text-center cursor-pointer hover:border-[#007BA3] hover:bg-[#005F83]/5" onclick="addNewTeam()">
                <div class="w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6">
                    <svg class="w-10 h-10 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                    </svg>
                </div>
                <h3 class="text-xl font-semibold text-gray-700">Add Team</h3>
                <p class="text-gray-500 mt-2">Create a new team to get started</p>
            </div>
        </div>

        <!-- Bottom Navigation -->
        <div class="fixed bottom-6 left-6 right-6 apple-nav rounded-2xl">
            <div class="flex justify-around py-4">
                <a href="home.html" class="apple-nav-item flex flex-col items-center text-gray-500 hover:text-gray-700">
                    <svg class="w-7 h-7 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
                    </svg>
                    <span class="text-xs font-medium">Home</span>
                </a>
                <a href="teams.html" class="apple-nav-item flex flex-col items-center text-[#005F83]">
                    <svg class="w-7 h-7 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2.5">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                    </svg>
                    <span class="text-xs font-semibold">Teams</span>
                </a>
                <a href="profile.html" class="apple-nav-item flex flex-col items-center text-gray-500 hover:text-gray-700">
                    <svg class="w-7 h-7 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                    </svg>
                    <span class="text-xs font-medium">Profile</span>
                </a>
            </div>
        </div>
    </div>

    <script>
        let coachTeams = [];

        // Load coach teams on page load
        window.addEventListener('load', function() {
            // Fix Phil Jackson's team assignment if needed
            fixPhilJacksonTeamAssignment();
            loadCoachTeams();
        });

        function fixPhilJacksonTeamAssignment() {
            // Ensure Phil Jackson has the correct team assignment
            const registeredUsers = JSON.parse(localStorage.getItem('registeredUsers') || '[]');
            const philIndex = registeredUsers.findIndex(u => u.email === 'earl.foronda@outlook.com');
            
            if (philIndex !== -1) {
                if (!registeredUsers[philIndex].teamName || registeredUsers[philIndex].teamName.trim() === '') {
                    registeredUsers[philIndex].teamName = 'Brookwood Elite';
                    localStorage.setItem('registeredUsers', JSON.stringify(registeredUsers));
                    console.log('Fixed Phil Jackson team assignment to Brookwood Elite');
                }
            }
            
            // Also fix in users array if present
            const allUsers = JSON.parse(localStorage.getItem('users') || '[]');
            const philInUsers = allUsers.findIndex(u => u.email === 'earl.foronda@outlook.com');
            
            if (philInUsers !== -1) {
                if (!allUsers[philInUsers].teamName || allUsers[philInUsers].teamName.trim() === '') {
                    allUsers[philInUsers].teamName = 'Brookwood Elite';
                    localStorage.setItem('users', JSON.stringify(allUsers));
                    console.log('Fixed Phil Jackson team assignment in users array');
                }
            }
        }

        function loadCoachTeams() {
            // Get coach data from session storage
            const coachUserData = JSON.parse(sessionStorage.getItem('coachUserData') || '{}');
            
            // For Phil Jackson, always use Brookwood Elite
            let teamName = 'Brookwood Elite';
            let coachFirstName = coachUserData.firstName || 'Coach';
            
            console.log(`Loading teams for coach: ${coachFirstName}`);
            
            // For now, hardcode the athlete count to 1 since we know Alexander is on the team
            const teamAthletes = []; // We'll fix the search later
            
            // Create team object with correct data
            const team = {
                name: teamName,
                athleteCount: 1, // We know Alexander Foronda is on this team
                sport: 'Basketball',
                icon: 'üèÄ'
            };
            
            coachTeams = [team];
            console.log('Created team object:', team);
            renderTeams();
        }

        function renderTeams() {
            const container = document.getElementById('teamsContainer');
            
            console.log('Rendering teams, count:', coachTeams.length);
            console.log('Teams to render:', coachTeams);
            
            if (coachTeams.length === 0) {
                console.log('No teams found, showing empty state');
                container.innerHTML = `
                    <div class="text-center py-8">
                        <p class="text-gray-500">No teams found</p>
                    </div>
                `;
                return;
            }
            
            const teamsHTML = coachTeams.map(team => `
                <div class="apple-card team-card p-8 cursor-pointer bg-gradient-to-r from-[#005F83] to-[#007BA3] text-white" onclick="selectTeam('${team.name}')">
                    <div class="flex items-center space-x-6">
                        <div class="w-20 h-20 bg-white/20 rounded-full flex items-center justify-center">
                            <span class="text-3xl">${team.icon}</span>
                        </div>
                        <div class="flex-1">
                            <h3 class="text-2xl font-bold text-white mb-2">${team.name}</h3>
                            <p class="text-white/90 text-base mb-3">(${team.athleteCount} athletes)</p>
                            <div class="flex items-center space-x-3">
                                <svg class="w-5 h-5 text-white/90" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                                <span class="text-white/90 text-base">${team.sport}</span>
                            </div>
                        </div>
                        <div class="text-right">
                            <svg class="w-6 h-6 text-white/70" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                            </svg>
                        </div>
                    </div>
                </div>
            `).join('');
            
            container.innerHTML = teamsHTML;
        }

        function selectTeam(teamName) {
            // Navigate to the tracking page with the selected team
            window.location.href = `tracking.html?team=${encodeURIComponent(teamName)}`;
        }

        function addNewTeam() {
            alert('Add Team functionality coming soon!');
        }
    </script>
</body>
</html>
